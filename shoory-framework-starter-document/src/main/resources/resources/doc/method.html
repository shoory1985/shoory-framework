<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="assets/img/favicon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
   接口
  </title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <link rel="stylesheet" href="assets/css/font-awesome.min.css">
  <link href="assets/css/material-dashboard.css" rel="stylesheet" />
</head>

<body class="">
  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="assets/img/sidebar-3.jpg">
      
    </div>
    <div class="main-panel">
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        
      </nav>
      <div class="content">
        <div class="container-fluid">
        
          <div class="row request_params">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title"><span class="module" style="text-decoration:underline;"></span> - <span class="name"></span>接口(<span class="method"></span>)</h4>
                  <p class="card-category"> 
                  <span class="description"></span>
                  入参<span class="field_count">?</span>个</p>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table">
                      <thead class=" text-primary">
                        <th>字段</th>
                        <th>名称</th>
                        <th>类型</th>
                        <th>必需</th>
                        <th>描述</th>
                        <th>示例</th>
                      </thead>
                      <tbody class="field_list">
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          
          <div class="row response_params">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <p class="card-category"> 出参<span class="field_count">?</span>个</p>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table">
                      <thead class=" text-primary">
                        <th>字段</th>
                        <th>名称</th>
                        <th>类型</th>
                        <th>描述</th>
                        <th>示例</th>
                      </thead>
                      <tbody class="field_list">
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          
          
          <div class="row return_codes">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <p class="card-category"> 响应<span class="code_count">?</span>种</p>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table">
                      <thead class=" text-primary">
                        <th>响应代码</th>
                        <th>响应说明</th>
                      </thead>
                      <tbody class="code_list">
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
      <footer class="footer">
        
      </footer>
    </div>
  </div>
  
  <!--   Core JS Files   -->
  <script src="assets/js/core/jquery.min.js"></script>
  <script src="assets/js/endpoint.js"></script>
  <script src="assets/js/jquery.rpc.js"></script>
  <script src="assets/js/core/popper.min.js"></script>
  <script src="assets/js/core/bootstrap-material-design.min.js"></script>
  <script src="assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <script src="assets/js/plugins/moment.min.js"></script>
  <script src="assets/js/plugins/sweetalert2.js"></script>
  <script src="assets/js/plugins/jquery.validate.min.js"></script>
  <!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
  <script src="assets/js/plugins/bootstrap-selectpicker.js"></script>
  <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
  <script src="assets/js/plugins/bootstrap-datetimepicker.min.js"></script>
  <!--  DataTables.net Plugin, full documentation here: https://datatables.net/  -->
  <script src="assets/js/plugins/jquery.dataTables.min.js"></script>
  <!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
  <script src="assets/js/plugins/bootstrap-tagsinput.js"></script>
  <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
  <script src="assets/js/plugins/jasny-bootstrap.min.js"></script>
  <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
  <script src="assets/js/plugins/fullcalendar.min.js"></script>
  <!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
  <script src="assets/js/plugins/jquery-jvectormap.js"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="assets/js/plugins/nouislider.min.js"></script>
  <!-- Library for adding dinamically elements -->
  <script src="assets/js/plugins/arrive.min.js"></script>
  <!-- Chartist JS -->
  <script src="assets/js/plugins/chartist.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="assets/js/material-dashboard.js" type="text/javascript"></script>
  <script src="assets/js/framework.js"></script>
<script>
function refreshPage() {
	var currentMethod = window.location.hash != "" ? window.location.hash.substring(1) : "";
	
	$.get(END_POINT + 'doc/method/'+currentMethod, function(result) {
		//基础
		renderMethodInfo(result);
		//入参
		renderRequestParams(result);
		//出参
		renderResponseParams(result);
		//响应
		renderReturns(result);
	});
	
	setTitle("接口: "+currentMethod);
	activeNav();
}

$(document).ready(function() {
	refreshPage();
	window.onhashchange = refreshPage;
 });
 
 

function renderMethodInfo(result) {
	$(".request_params .name").html(result.name);
	$(".request_params .method").html(result.method);
	$(".request_params .description").html(result.description);
	$(".request_params .module").html('<a href="module.html#'+result.module+'">'+result.module+'模块</a>');
}
function renderRequestParams(result) {
	var html = renderParams(result.requestFields, "", "", true);
	$(".request_params .field_count").html(result.requestFields.length);
	$(".request_params .field_list").html(html);
}
function renderResponseParams(result) {
	var html = renderParams(result.responseFields, "", "", false);
	$(".response_params .field_count").html(result.responseFields.length);
	$(".response_params .field_list").html(html);
}

function renderParams(list, prefix, html, showRequired) {
	for (var i in list) {
		var item = list[i];
		var classNameArry = (item.className).split(".");
		var className = classNameArry[classNameArry.length-1];
		
		html += '<tr style="'+(prefix == '' ? '' : 'font-style:italic;')+(item.required ? 'text-decoration:underline;' : '')+'">';
		html += '<td>'+prefix+item.field+'</td>';
		html += '<td>'+item.name+'</td>';
		html += '<td>'+modelLink(className)+'</td>';
		if (showRequired) {html += '<td>'+(item.required ? "Y" : "")+'</td>';}
		html += '<td>'+item.description+'</td>';
		html += '<td>'+item.examples+'</td>';
		html += '</tr>';
		
		if (item.params != undefined && item.params != null) {
			html = renderParams(item.params, prefix+"----", html, showRequired);
		}
	}
	return html;
}

function renderReturns(result) {
	var html = '';
	for (var i in result.returns) {
		var item = result.returns[i];
		
		var color;
		if (item.code.indexOf("SUCCESS") == 0) {
			color  = '#080';
		} else if (item.code.indexOf("WARNING") == 0) {
			color  = '#880';
		}else {
			color  = '#b00';
		}
		
		html += '<tr >';
		html += '<td style="color:'+color+'">'+item.code+'</td>';
		html += '<td>'+(item.message == undefined ? '' : item.message)+'</td>';
		html += '</tr>';
	}

	$(".return_codes .code_list").html(html);
	$(".return_codes .code_count").html(result.returns.length);
}
  </script>
</body>

</html>
